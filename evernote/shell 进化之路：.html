<html>
<head>
  <title>shell 进化之路：</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600753 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="823"/>
<h1>shell 进化之路：</h1>

<div>
<span><div><span style="font-size: 16pt; color: rgb(255, 0, 0);">  shell 进化之路：</span></div><div><br/></div><div><span style="font-size: 19px; color: rgb(54, 101, 238);">  1)for循环：</span></div><div><span style="color: rgb(255, 0, 0);">        for i in $(seq 0 27);</span> do echo hello ; done|less</div><div><span style="color: rgb(255, 70, 53);">        for i in /share/nas27/luozw/N01_TEST_b588/*</span> ; do echo $i ;done |less</div><div><span style="color: rgb(255, 0, 0);">        for ((i=0;i&lt;5;i++)) ;</span> do echo $i ; done|less</div><div><span style="color: rgb(255, 0, 0);">        i=1 ; while [ $i -le 10 ]  ;</span> do echo $i ; i=$(($i+1)) ; done|less</div><div>    2）shell转置：        awk -F &quot;\t&quot; '{for(i=1;i&lt;=NF;i++){if(NR == 1){a[i]=$i;}else{a[i]=a[i]&quot;\t&quot;$i;}}}END{for(i=1;a[i]!=&quot;&quot;;i++){print a[i];}}'</div><div>    3)  多行注释  <span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(255, 0, 0); font-family: &quot;Microsoft YaHei&quot;, &quot;SF Pro Display&quot;, Roboto, Noto, Arial, &quot;PingFang SC&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">:&lt;&lt;!         ！</span></div><div>    4)  shell 中报错即停止运行： <span style="color: rgb(255, 0, 0); font-weight: bold;">set -e </span></div><div style="margin-left: 80px;"><span style="color: rgb(255, 0, 0);">1. 当命令的返回值为非零状态时，则立即退出脚本的执行。</span></div><div style="margin-left: 80px;">2. 作用范围只限于脚本执行的当前进行，不作用于其创建的子进程。</div><div style="margin-left: 80px;">3. 另外，当想根据命令执行的返回值，输出对应的log时，最好不要采用set -e选项，而是通过配合exit 命令来达到输出log并退出执行的目的。</div><div><span style="color: rgb(255, 0, 0);">    5）这两种写法结果是不一样的，”&lt; file “这样读入时，循环中的变量可以传递到循环之外。而另一种写法不行。</span></div><div>        less file|whil read a b c ; do ...; done  </div><div>         whil read a b c ; do ...; done  &lt; file  </div><div><br/></div><div><span style="font-size: 19px; color: rgb(54, 101, 238);">    2.Shell History</span></div><div>history|less |!job       运行History中的最近一条以job 开关的命令</div><div>history|less |!1245   运行History中 的第1245条命令</div><div>    <span style="font-size: 19px; color: rgb(54, 101, 238);"> 3.Sheel 命令简写</span></div><div>     alias ln='ln -s'               unalias ln</div><div>    <span style="font-size: 19px; color: rgb(54, 101, 238);"> 4.Sheel进程控制</span></div><div>      <span style="font-size: 14px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-family: Calibri; font-variant: normal;">Ctrl+z     进程暂停</span></div><div><span style="font-size: 14px; background-color: rgb(255, 255, 255); font-family: Calibri;">          fg         将暂停任务 恢复前台运行</span></div><div><span style="font-size: 14px; background-color: rgb(255, 255, 255); font-family: Calibri;">          bg         将暂停任务挂后台运行</span></div><div><span style="font-size: 14px; background-color: rgb(255, 255, 255); font-family: Calibri;">        </span> <span style="font-size: 14px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-family: Calibri; font-variant: normal;">Ctrl+c   结束正在运行的任务</span></div><div><span style="font-size: 19px; background-color: rgb(255, 255, 255); font-family: Calibri;">     </span> <span style="font-size: 19px; color: rgb(54, 101, 238); font-family: Calibri;">5.Sheet替换</span></div><div><span style="font-size: 14px; font-family: Calibri;">          ls 1.0_fastqs/WGC051937U_combined_R1.fastq.gz|tr 'cmgz' 'T'        与perl中TR 用法差不多，一个字符对应一个</span></div><div><span style="font-size: 14px; background-color: rgb(255, 255, 255); font-family: Calibri;">          ls 1.0_fastqs/| tr '[a-z]' '[A-Z]'                                              将小写全部替换成大写</span></div><div><span style="font-size: 21px; background-color: rgb(255, 255, 255); color: rgb(54, 101, 238); font-family: &quot;Times New Roman&quot;;">     6.</span><span style="font-size: 21px; background-color: rgb(255, 255, 255); color: rgb(54, 101, 238); font-family: &quot;Times New Roman&quot;;">rsync </span></div><div><span style="font-size: 14px; background-color: rgb(255, 255, 255); font-family: Calibri;">rsync -e 'ssh -p 22' -avz luozw@192.168.1.247:/share/nas27/luozw/NT01_TEST/20160513_b610/ ./</span></div><div><span style="font-size: 14px; background-color: rgb(255, 255, 255); font-family: Calibri;">rsync -e 'ssh -p 22001' -avz --delete ./ dydf@192.168.1.169:/thinker/fastdata/dydf/bin/TEST_of_luozw/</span></div><div><span style="font-size: 14px; background-color: rgb(255, 255, 255); font-family: Calibri;">rsync -avz luozw@192.168.1.247:/share/nas27/luozw/NT01_TEST/20160513_b610/NT01/27584xbycn1A-NT01-NT01/  ./    </span></div><div><span style="font-size: 14px; background-color: rgb(255, 255, 255); font-family: Calibri;">rsync -avz --delete . luozw@compute-0-27:/state/partition1/bwa/</span></div><div><span style="font-size: 14px; font-family: Calibri;">for i in $(seq 0 27) ; do echo rsync -avz --delete . luozw@compute-0-$i:/state/partition1/bwa/; done|less</span></div><div>for i in compute-0-{0..1}; do echo $i  &amp;&amp; ssh $i 'du -s /state/partition1/Exome_db/ ' ;done|less</div><div><br/></div><div><span style="font-size: 14px; background-color: rgb(255, 255, 255); font-family: Calibri;">  </span><span style="font-size: 14px; background-color: rgb(255, 255, 255); color: rgb(54, 101, 238); font-family: Calibri;">    </span> <span style="font-size: 21px; color: rgb(54, 101, 238); font-family: Calibri;">  7.scp</span></div><div><span style="font-size: 14px; font-family: Calibri;">scp -P 22001 27571xbycn1A_NT01_b610A_Poly_v1.xlsx dydf@192.168.1.169:/thinker/fastdata/dydf/bin/Exome-v2</span></div><div><span style="font-size: 14px; font-family: Calibri;">scp -P 22 luozw@192.168.1.247:/share/nas27/luozw/NT01_TEST/20160513_b610/NT01/27584xbycn1A-NT01-NT01/test.sh ./</span></div><div>    <span style="font-size: 19px; color: rgb(45, 79, 201);"> 8.ds</span></div><div><span style="font-size: 14px; background-color: rgb(255, 255, 255); font-family: Calibri;">     ds upload All_variation.vcf Exome-v2/WES_related</span></div><div><span style="font-size: 19px; background-color: rgb(255, 255, 255); font-family: Calibri;">     </span><span style="font-size: 19px; background-color: rgb(255, 255, 255); color: rgb(45, 79, 201); font-family: Calibri;">9.tree</span></div><div><span style="font-size: 14px; background-color: rgb(255, 255, 255); font-family: Calibri;">          tree call_depth.sh.20966.qsub          tree ./       </span></div><div><span style="font-size: 14px; background-color: rgb(255, 255, 255); font-family: Calibri;">     </span> <span style="font-size: 19px; background-color: rgb(255, 255, 255); color: rgb(45, 79, 201); font-family: Calibri;">10.find</span></div><div><span style="font-size: 14px; background-color: rgb(255, 255, 255); font-family: Calibri;">     find /share/nas27/luozw/NT01_TEST/20160513_b610/  -name &quot;*.xlsx&quot; -type f  </span><span style="font-size: 14px; background-color: rgb(255, 255, 255); font-family: Calibri;">-user luozw</span></div><div>    find /share/nas27/luozw/ -name &quot;*.xlsx&quot; -exec cp {} TEST \;</div><div>    find LL_FAM_3_level -name &quot;*.*&quot; -type f |xargs grep xlsx |less -S</div><div>    <span style="font-size: 19px; color: rgb(45, 79, 201);">11.df</span></div><div>     df -h -t nfs -T</div><div><span style="font-size: 19px; color: rgb(45, 79, 201);">   12.xargs</span></div><div>     ls |xargs -t -i mv {} {}.bak</div><div>     ls  ../*.bak|xargs  -tr rm</div><div>     find ../ -name &quot;*xlsx&quot;|xargs -tri cp {} {}.bak</div><div><span style="font-size: 19px;">  </span> <span style="font-size: 19px; color: rgb(45, 79, 201);">13. linux 中文显示</span></div><div>     /etc/sysconfig/i18n</div><div>     locale</div><div>     export LC_ALL=en_US.utf-8</div><div>    <span style="font-size: 19px; color: rgb(45, 79, 201);"> 14. linux 文件加密与解密</span></div><div>     gpg -c</div><div>     gpg -d</div><div> <span style="font-size: 19px; color: rgb(45, 79, 201);">   15  sort 命令详细用法</span></div><div style="margin-left: 80px;">animal:10:1.1</div><div style="margin-left: 80px;">apple:10:2.5</div><div style="margin-left: 80px;">orange:20:3.4</div><div style="margin-left: 80px;">banana:30:5.5</div><div style="margin-left: 80px;">pear:90:2.3      </div><div style="margin-left: 40px;">less test|sort -t : -k 2,2 -k 3,3 -n（起始，终止）</div><div>    <span style="font-size: 19px; color: rgb(45, 79, 201);"> 16.paste 命令详解</span></div><div>     ls |paste -d '\t' - - - - - -|less（－读入一个）</div></span>
</div></body></html> 