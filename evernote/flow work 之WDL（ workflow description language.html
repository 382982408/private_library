<html>
<head>
  <title>flow work 之WDL（ workflow description language）：</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600753 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1659"/>
<h1>flow work 之WDL（ workflow description language）：</h1>

<div>
<span><div><span style="font-size: 16pt; color: rgb(255, 0, 0);">flow work 之WDL（</span> <span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 16pt; color: rgb(255, 0, 0); font-family: &quot;Microsoft YaHei&quot;, &quot;SF Pro Display&quot;, Roboto, Noto, Arial, &quot;PingFang SC&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: common-ligatures;">workflow description language</span><span style="font-size: 16pt; color: rgb(255, 0, 0);">）：</span></div><div><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(77, 77, 77); font-family: &quot;Microsoft YaHei&quot;, &quot;SF Pro Display&quot;, Roboto, Noto, Arial, &quot;PingFang SC&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: common-ligatures;">   <span style="font-size: 16px; color: rgb(77, 77, 77); font-family: &quot;Microsoft YaHei&quot;, &quot;SF Pro Display&quot;, Roboto, Noto, Arial, &quot;PingFang SC&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: common-ligatures; font-weight: bold;"> </span><span style="font-size: 16px; color: rgb(77, 77, 77); font-family: &quot;Microsoft YaHei&quot;, &quot;SF Pro Display&quot;, Roboto, Noto, Arial, &quot;PingFang SC&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: common-ligatures; font-weight: bold;">WDL+ </span></span><span style="box-sizing: border-box; outline: 0px; word-wrap: break-word; font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="background-color: rgb(255, 255, 255); font-size: 16px; color: rgb(77, 77, 77); font-family: &quot;Microsoft YaHei&quot;, &quot;SF Pro Display&quot;, Roboto, Noto, Arial, &quot;PingFang SC&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: common-ligatures; font-weight: bold;">Cromwell</span></span><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(77, 77, 77); font-family: &quot;Microsoft YaHei&quot;, &quot;SF Pro Display&quot;, Roboto, Noto, Arial, &quot;PingFang SC&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: common-ligatures;">（an execution engine that can run WDL scripts）是目前可以更好使用GATK的一套工具。</span></div><div><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(77, 77, 77); font-family: &quot;Microsoft YaHei&quot;, &quot;SF Pro Display&quot;, Roboto, Noto, Arial, &quot;PingFang SC&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: common-ligatures;">    </span><span style="font-size: 12pt; color: rgb(77, 77, 77); font-family: &quot;Microsoft YaHei&quot;;"><span style="font-size: 12pt; color: rgb(77, 77, 77); font-family: &quot;Microsoft YaHei&quot;; font-weight: bold;">WOMTool</span> ：a standalone tool for parsing, validating, linting, and generating a graph of a WDL.</span></div><div><span style="font-size: 12pt; color: rgb(77, 77, 77); font-family: &quot;Microsoft YaHei&quot;;">    backend文档：</span><span style="font-size: 12pt;"><a href="https://github.com/broadinstitute/cromwell/tree/develop/cromwell.example.backends" style="font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;;">https://github.com/broadinstitute/cromwell/tree/develop/cromwell.example.backends</a></span></div><div><br/></div><div><font style="font-size: 12pt;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 12pt;">1）官网地址： </span><a href="https://software.broadinstitute.org/wdl/documentation/" style="font-size: 12pt; color: rgb(255, 0, 0);">https://software.broadinstitute.org/wdl/documentation/</a></font></div><div><span style="font-size: 10pt;">                            </span><a href="https://software.broadinstitute.org/wdl/documentation/quickstart" style="font-size: 10pt;">https://software.broadinstitute.org/wdl/documentation/quickstart</a></div><div><span style="font-size: 10pt;">                            </span><a href="https://cromwell.readthedocs.io/en/develop/tutorials/FiveMinuteIntro/" style="font-size: 10pt;">https://cromwell.readthedocs.io/en/develop/tutorials/FiveMinuteIntro/</a></div><div><span style="color: rgb(255, 0, 0); font-weight: bold;">      WDL语言教程：</span><a href="https://github.com/openwdl/wdl/blob/master/versions/draft-2/SPEC.md#expressions" style="color: rgb(255, 0, 0); font-weight: bold;">https://github.com/openwdl/wdl/blob/master/versions/draft-2/SPEC.md#expressions</a></div><div><span style="color: rgb(255, 0, 0); font-weight: bold;">                            </span><a href="https://cromwell.readthedocs.io/en/stable/backends/BCS/?spm=a2c4e.10696291.0.0.58b619a43IiXpb" style="color: rgb(255, 0, 0); font-weight: bold;">https://cromwell.readthedocs.io/en/stable/backends/BCS/?spm=a2c4e.10696291.0.0.58b619a43IiXpb</a></div><div><span style="font-size: 10pt;">     下载地址：      </span><a href="https://github.com/broadinstitute/cromwell/releases/tag/45.1" style="font-size: 10pt;">https://github.com/broadinstitute/cromwell/releases/tag/45.1</a></div><div><span style="font-size: 10pt;">      可参考教程：  </span><a href="https://blog.csdn.net/theomarker/article/details/79627804" style="font-size: 10pt;">https://blog.csdn.net/theomarker/article/details/79627804</a></div><div><span style="font-size: 10pt;">                            </span><a href="https://www.cnblogs.com/lyyao/p/9799280.html" style="font-size: 10pt;">https://www.cnblogs.com/lyyao/p/9799280.html</a></div><div>      本地地址：/mnt/X500/farmers/luozw/bin/WdlCromwell<span style="color: rgb(255, 0, 0); font-weight: bold;">（cromwell-45.1.jar + womtool-45.1.jar）</span></div><div><span style="font-size: 12pt;">2） WDL详解：</span></div><div><span style="font-size: 12pt;">                                            </span><span style="font-size: 12pt;"><img src="flow work 之WDL（ workflow description language_files/Image.png" type="image/png" data-filename="Image.png" width="282"/></span></div><div><span style="font-size: 12pt;"><img src="flow work 之WDL（ workflow description language_files/Image [1].png" type="image/png" data-filename="Image.png" width="467"/></span><span style="font-size: 12pt;"><img src="flow work 之WDL（ workflow description language_files/Image [2].png" type="image/png" data-filename="Image.png" width="692"/></span></div><div><span style="font-size: 12pt;"><img src="flow work 之WDL（ workflow description language_files/Image [3].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">3）输入准备：</span></div><div><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 16px; color: rgb(255, 0, 0);">       </span> <span style="font-size: 11pt; color: rgb(255, 0, 0);">   1.1）将wdl 流程中的input 参数整理为json格式</span></span></div><div><font style="font-size: 11pt;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 11pt; color: rgb(255, 0, 0);">                    </span><span style="min-height: 12pt; font-size: 11pt; color: rgb(255, 0, 0);">java -jar womtool.jar inputs rnaseq.wdl &gt; rnaseq_inputs.json</span></font></div><div><span style="min-height: 12pt;"><span style="font-size: 11pt; color: rgb(1, 1, 1);">    </span><span style="font-size: 11pt; color: rgb(1, 1, 1);">     </span> <span style="font-size: 11pt; color: rgb(1, 1, 1);">  1.2）修改js 输入文件中的参数为真实参数</span></span></div><div><font style="font-size: 11pt;"><span style="min-height: 12pt; font-size: 11pt; color: rgb(1, 1, 1);">                    vim </span><span style="min-height: 12pt; font-size: 11pt; color: rgb(1, 1, 1);">rnaseq_inputs.json</span></font></div><div><span style="min-height: 12pt;"><span style="font-size: 11pt;"><span style="font-size: 11pt; color: rgb(255, 0, 0);">            1.3）运行分析任务</span></span></span></div><div><font style="font-size: 11pt;"><span style="min-height: 12pt; font-size: 11pt; color: rgb(255, 0, 0);">                    </span><span style="min-height: 12pt; font-size: 11pt; color: rgb(255, 0, 0);">java -jar cromwell.jar run rnaseq.wdl --inputs rnaseq_inputs.json</span></font></div><div><font style="font-size: 11pt;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 11pt;">            1.4）</span></span><span style="min-height: 14pt; font-size: 11pt;">Cromwell 支持WDL 流程在SGE 集群(</span><span style="min-height: 14pt; font-size: 11pt; color: rgb(69, 131, 182);">SGE</span><span style="min-height: 14pt; font-size: 11pt;">) 运行，命令如下：</span></font></div><div><font style="font-size: 11pt;"><span style="min-height: 14pt; font-size: 11pt;">                    </span><span style="min-height: 12pt; font-size: 11pt; color: rgb(1, 1, 1);">java -Dconfig.file=sge.conf -jar cromwell.jar run hello.wdl</span></font></div><div><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">4）字符串处理与wdl语法</span></div><div><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">      <span style="font-size: 16px; font-family: &quot;Times New Roman&quot;;">  4.1）scatter 任务分散</span></span></div><div style="margin-left: 80px;"><span style="font-size: 12pt;"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;;">scatter (line in mergefq.sm2fq) {</span></span></div><div style="margin-left: 80px;"><span style="font-size: 12pt;"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;;">    call fqqc {</span></span></div><div style="margin-left: 80px;"><span style="font-size: 12pt;"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;;">    }</span></span></div><div style="margin-left: 80px;"><span style="font-size: 12pt;"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;;">}</span></span></div><div><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;;">        4.2） </span><span style="font-size: 11pt; color: rgb(255, 0, 0); font-family: &quot;Times New Roman&quot;; font-weight: bold;">  字符串gather</span></div><div style="margin-left: 80px;"><span style="min-height: 12pt; font-size: 9pt;"><span style="font-size: 9pt; color: rgb(1, 1, 1); font-family: &quot;Times New Roman&quot;;">Array[File] bams = align.bam</span></span></div><div style="min-height: 12pt; text-align: left; margin-left: 80px;"><span style="min-height: 12pt; font-size: 9pt;"><span style="font-size: 9pt; color: rgb(1, 1, 1); font-family: &quot;Times New Roman&quot;;">String bam_list_space_seperated = ${sep=&quot; &quot; bams}</span></span></div><div style="min-height: 12pt; text-align: left; margin-left: 80px;"><span style="min-height: 12pt; font-size: 9pt;"><span style="font-size: 9pt; color: rgb(1, 1, 1); font-family: &quot;Times New Roman&quot;;">String bam_list_comma_seperated = ${sep=&quot;,&quot; bams}</span></span></div><div style="min-height: 12pt; text-align: left; margin-left: 80px;"><span style="min-height: 12pt; font-size: 9pt;"><span style="font-size: 9pt; color: rgb(1, 1, 1); font-family: &quot;Times New Roman&quot;;">String bam_list_for_picard = ${sep=&quot; -I &quot; bams}</span></span></div><div style="min-height: 12pt; text-align: left; margin-left: 80px;"><font style="font-size: 11pt;"><span style="font-size: 11pt; color: rgb(255, 0, 0); font-family: &quot;Times New Roman&quot;; font-weight: bold;">文件取basename</span></font></div><div style="min-height: 12pt; text-align: left; margin-left: 80px;"><span style="font-size: 9pt; color: rgb(1, 1, 1); font-family: &quot;Times New Roman&quot;;">String output_basename = basename(basename(tumor_reads, &quot;.bam&quot;),&quot;.cram&quot;)</span></div><div style="text-align: left;"><span style="font-size: 9pt; color: rgb(1, 1, 1); font-family: &quot;Times New Roman&quot;;">                           This function returns the basename of a file path passed to it: basename(&quot;/path/to/file.txt&quot;) returns &quot;file.txt&quot;.</span></div><div style="min-height: 12pt; text-align: left; margin-left: 80px;"><span style="font-size: 9pt; color: rgb(1, 1, 1); font-family: &quot;Times New Roman&quot;;">Also supports an optional parameter, suffix to remove: basename(&quot;/path/to/file.txt&quot;, &quot;.txt&quot;) returns &quot;file&quot;.</span></div><div style="min-height: 12pt; text-align: left; margin-left: 80px;"><font style="font-size: 11pt;"><span style="font-size: 11pt; color: rgb(255, 0, 0); font-weight: bold;">公式计算</span></font></div><div style="min-height: 12pt; text-align: left; margin-left: 80px;"><span style="font-size: 9pt;">Int tumor_cram_to_bam_disk = ceil(tumor_reads_size * cram_to_bam_multiplier)</span></div><div style="min-height: 12pt; text-align: left; margin-left: 80px;"><font style="font-size: 11pt;"><span style="font-size: 11pt; color: rgb(255, 0, 0); font-weight: bold;">if语句</span></font></div><div style="min-height: 12pt; text-align: left; margin-left: 80px;"><span style="font-size: 9pt;">File? normal_bam = if defined(normal_reads) then select_first([NormalCramToBam.output_bam, normal_reads]) else normal_reads</span></div><div style="min-height: 12pt; text-align: left; margin-left: 80px;"><span style="font-size: 9pt;">Int m2_output_size = tumor_bam_size / scatter_count</span></div><div style="text-align: left;"><span style="font-size: 11pt;">            </span><span style="font-size: 11pt; color: rgb(255, 0, 0); font-weight: bold;">       length</span></div><div style="min-height: 12pt; text-align: left; margin-left: 80px;"><span style="font-size: 9pt;">Int array_length = length(array)</span></div><div style="text-align: left; margin-left: 80px;"><span style="font-size: 11pt; color: rgb(227, 0, 0); font-weight: bold;">sub 替换</span></div><div style="text-align: left; margin-left: 80px;"><span style="font-size: 9pt;">String chocolike = &quot;I like chocolate when it's late&quot;</span></div><div style="text-align: left; margin-left: 80px;"><span style="font-size: 9pt;">String chocolove = sub(chocolike, &quot;like&quot;, &quot;love&quot;) # I love chocolate when it's late</span></div><div style="text-align: left; margin-left: 80px;"><span style="font-size: 9pt;">File input_file = &quot;my_input_file.bam&quot;</span></div><div style="min-height: 12pt; text-align: left; margin-left: 80px;"><span style="font-size: 9pt;">String output_file_name = sub(input_file, &quot;\\.bam$&quot;, &quot;.index&quot;) # my_input_file.index   </span></div><div style="text-align: left; margin-left: 80px;"><span style="font-size: 11pt; color: rgb(255, 0, 0); font-weight: bold;">write 输出</span></div><div style="text-align: left; margin-left: 80px;"><span style="font-size: 9pt;">./script --map=${write_json(map)}</span></div><div style="text-align: left; margin-left: 80px;"><span style="font-size: 9pt;">./script --map=${write_map(map)}</span></div><div style="text-align: left; margin-left: 80px;"><span style="font-size: 9pt;">./script --tsv=${write_tsv(array)}</span></div><div style="text-align: left; margin-left: 80px;"><span style="font-size: 9pt;">./script --file-list=${write_lines(array)}</span></div><div><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-family: &quot;Times New Roman&quot;;">        4.3）</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;;">File? intervals        --&gt;&gt;        </span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;;">${&quot;-L &quot; + intervals}</span></div><div><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;;">        4.4)</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;;">  Boolean? make_bamout </span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;;"> </span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;;">    --&gt;&gt;</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;;">    </span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;;">    Boolean make_bamout_or_default = select_first([make_bamout, false])</span></div><div><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;;">        4.5)   </span><span style="min-height: 14pt; font-size: 11pt; color: rgb(1, 1, 1); font-family: &quot;Times New Roman&quot;;">command</span> <span style="min-height: 14pt; font-size: 11pt;"><span style="font-size: 11pt; color: rgb(1, 1, 1); font-family: &quot;Times New Roman&quot;;">是程序实际执行的命令，</span><span style="font-size: 11pt; color: rgb(255, 0, 0); font-family: &quot;Times New Roman&quot;; font-weight: bold;">变量通过</span></span><span style="min-height: 14pt; font-size: 11pt;"><span style="font-size: 11pt; color: rgb(255, 0, 0); font-family: &quot;Times New Roman&quot;; font-weight: bold;">${…}</span></span> <span style="min-height: 14pt; font-size: 11pt;"><span style="font-size: 11pt; color: rgb(255, 0, 0); font-family: &quot;Times New Roman&quot;; font-weight: bold;">形式调用，其中花括弧是必须的。</span></span></div><div><span style="min-height: 14pt; font-size: 11pt;"><span style="font-size: 11pt; color: rgb(255, 0, 0); font-family: &quot;Times New Roman&quot;; font-weight: bold;">                   而command中掉用的bash中的变量不能添加</span></span><span style="min-height: 14pt; font-size: 11pt; color: rgb(255, 0, 0); font-family: &quot;Times New Roman&quot;; font-weight: bold;">花括弧（比如$a&quot;.txt&quot;），wdl会将${a}作为task变量。</span></div><div><span style="font-size: 11pt; color: rgb(255, 0, 0); font-family: &quot;Times New Roman&quot;; font-weight: bold;">  </span> <span style="font-size: 11pt; color: rgb(70, 70, 70); font-family: &quot;Times New Roman&quot;; font-weight: bold;">  </span> <span style="font-size: 11pt; color: rgb(70, 70, 70); font-family: &quot;Times New Roman&quot;;"> </span> <span style="font-size: 11pt; color: rgb(70, 70, 70); font-family: &quot;Times New Roman&quot;;"> 4.6） 对于input 的json文件中的optional 选项，</span><span style="font-size: 11pt; color: rgb(255, 0, 0); font-family: &quot;Times New Roman&quot;;">如果需要则修改值，如果不需要，则删除之，留下来又不修改是不对的。</span></div><div><span style="min-height: 14pt; font-size: 11pt;"><span style="font-size: 11pt; color: rgb(255, 0, 0); font-family: &quot;Times New Roman&quot;;">     </span><span style="font-size: 11pt; color: rgb(255, 0, 0); font-family: &quot;Times New Roman&quot;;">   </span> <span style="font-size: 11pt; font-family: &quot;Times New Roman&quot;;">4.7）对于执行文件，</span><span style="font-size: 11pt; color: rgb(255, 0, 0); font-family: &quot;Times New Roman&quot;;">用String类型，不要用File 类型</span><span style="font-size: 11pt; font-family: &quot;Times New Roman&quot;;">。</span><span style="font-size: 11pt; font-family: &quot;Times New Roman&quot;;">wdl 会把File 文件链接到本地目录作为输入，这样可能导致程序中涉及到Bin的地址全部错误。</span></span></div><div><span style="min-height: 14pt; font-size: 11pt;"><span style="font-size: 11pt; font-family: &quot;Times New Roman&quot;;">                  对于可能涉及到其附属文件的时候，</span></span><span style="min-height: 14pt; font-size: 11pt; color: rgb(255, 0, 0); font-family: &quot;Times New Roman&quot;;">用String类型，不要用File 类型</span><span style="min-height: 14pt; font-size: 11pt; font-family: &quot;Times New Roman&quot;;">。比如/mnt.../hg19.fa，源文件fa是有idx文件的，如果wdl中用File类型，任务中会将fa链接到本地目录，那么在进行分析的时候，就会找不到其dict 等索引文件了。</span></div><div><span style="font-size: 11pt; min-height: 14pt; font-family: &quot;Times New Roman&quot;;">        4.8）</span><span style="font-size: 11pt; color: rgb(255, 0, 0); font-family: &quot;Times New Roman&quot;;">wdl command -&gt; bash 中不会自动忽视反转义符号</span><span style="font-size: 11pt; min-height: 14pt; font-family: &quot;Times New Roman&quot;;">（如</span><span style="font-size: 11pt; font-family: &quot;Times New Roman&quot;;">group_prefix_tmp=&quot;$SM\_$LB\_$PU&quot;，$</span><span style="font-size: 11pt; font-family: &quot;Times New Roman&quot;;">group_prefix_tmp 中会带上&quot;\&quot;这个符号</span><span style="font-size: 11pt; font-family: &quot;Times New Roman&quot;;">）</span></div><div><span style="font-size: 11pt;"><span style="font-size: 11pt; font-family: &quot;Times New Roman&quot;;">       </span> <span style="font-size: 11pt; color: rgb(255, 0, 0); font-family: &quot;Times New Roman&quot;;">4.9）call-input 里的内容需要用“，”分割开</span></span></div><div><span style="font-size: 11pt; font-family: &quot;Times New Roman&quot;;">        4.10）task 的输入变量不能直接作为输出变量，会报错（</span><span style="font-size: 11pt; font-family: &quot;Times New Roman&quot;;">Unrecognized token on line</span><span style="font-size: 11pt;"><span style="font-size: 11pt; font-family: &quot;Times New Roman&quot;;">）</span></span></div><div><br/></div><div><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">5）flow-work 生成 流程图：</span></div><div><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-weight: bold;">        </span> <span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-family: &quot;Microsoft YaHei&quot;, &quot;Segoe UI&quot;, system-ui, Roboto, &quot;Droid Sans&quot;, &quot;Helvetica Neue&quot;, sans-serif, Tahoma, &quot;Segoe UI Symbol&quot;; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">java -jar womtool.jar graph a.wdl &gt; a.dot</span></div><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 14px; font-family: &quot;Microsoft YaHei&quot;, &quot;Segoe UI&quot;, system-ui, Roboto, &quot;Droid Sans&quot;, &quot;Helvetica Neue&quot;, sans-serif, Tahoma, &quot;Segoe UI Symbol&quot;; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">        </span> <span style="font-size: 14px;"><span style="font-size: 14px; font-family: &quot;Microsoft YaHei&quot;, &quot;Segoe UI&quot;, system-ui, Roboto, &quot;Droid Sans&quot;, &quot;Helvetica Neue&quot;, sans-serif, Tahoma, &quot;Segoe UI Symbol&quot;; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> </span></span></span><span style="min-height: 12pt; font-size: 9pt; color: rgb(1, 1, 1); font-family: Hasklig-Identity-H; font-weight: bold;">dot -Tsvg</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 14px; font-family: &quot;Microsoft YaHei&quot;, &quot;Segoe UI&quot;, system-ui, Roboto, &quot;Droid Sans&quot;, &quot;Helvetica Neue&quot;, sans-serif, Tahoma, &quot;Segoe UI Symbol&quot;; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> -o a.svg a.dot</span></span></div><div><span style="font-size: 12pt;">6）validate 检查flowwork</span></div><div>         java -jar womtool-45.1.jar validate myWorkflow.wdl</div><div><br/></div><div><br/></div><div><span style="color: rgb(255, 0, 0); font-weight: bold;">java -Dconfig.file=sge.conf -jar ../cromwell-45.1.jar run onco_wes_v1.wdl --inputs onco_wes_v1.wdl.json</span></div><div><font style="font-size: 14pt;"><br/></font></div><div><span style="font-size: 14pt; color: rgb(255, 0, 0); font-weight: bold;">oncoWES_pip_V1 生产须知：</span></div><div><span style="color: rgb(255, 0, 0); font-weight: bold;">    1）如果是WES数据一定要指定 bam2vcf.bed_path_1 ，不然默认为wgs.bed 会非常慢 （&quot;oncoWES_v1.bam2vcf.bed_path_1&quot;: &quot;String? (optional)&quot;,）</span></div><div><span style="color: rgb(255, 0, 0); font-weight: bold;">        /mnt/X500/farmers/lijun/an/pip/m2/db/chip.bed    39.5016（M）</span></div><div><span style="color: rgb(255, 0, 0); font-weight: bold;">        /mnt/X500/farmers/lijun/an/pip/m2/db/nc_rwe2.chip.bed    48.1063（M）</span></div><div><span style="color: rgb(255, 0, 0); font-weight: bold;">        /mnt/X500/farmers/lijun/an/pip/m2/db/wgs.anshul.bed    3083.51（M）</span></div><div><br/></div><div>    2） 这两个bed文件都应该替换才对，第一个bed是用来指控的，第二个bed是用来 call vcf的。</div><div style="margin-left: 40px;">第一个bed 如果不指定，就会用wgs的bed来评估，得到的覆盖度是不对的。</div><div style="margin-left: 40px;">第二个bed 如果不指定，就会用wgs的bed来分析，浪费时间资源</div><div style="margin-left: 40px;">&quot;oncoWES_v1.fq2bam.interval_bed_1&quot;: &quot;File? (optional)&quot;,</div><div style="margin-left: 40px;">&quot;oncoWES_v1.bam2vcf.bed_path_1&quot;: &quot;String? (optional)&quot;,</div><div><span style="color: rgb(255, 0, 0); font-weight: bold;">    3）</span></div><div><br/></div><div><br/></div><div><br/></div><div><font style="font-size: 16pt;"><span style="font-size: 16pt; color: rgb(255, 70, 53); font-weight: bold;">FAQ:</span></font></div><div><span style="font-size: 12pt;">1） 怎么控制task 本地运行？</span></div><div style="margin-left: 40px;"><span style="box-sizing: border-box; overflow: auto; font-size: 14px; background-color: rgb(245, 245, 245); border-radius: 0px; word-break: break-all; word-wrap: break-word; border: 1px solid rgb(204, 204, 204); letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: pre-wrap; color: rgb(51, 51, 51); font-family: Consolas, Monaco, &quot;Lucida Console&quot;, &quot;Courier New&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.4;">backend ： &quot;Local&quot;</span></div><div style="margin-left: 40px;"><a href="https://gatkforums.broadinstitute.org/wdl/discussion/10354/multiple-backends-for-cromwell">https://gatkforums.broadinstitute.org/wdl/discussion/10354/multiple-backends-for-cromwell</a></div><div>2）为什么有的任务会卡住呢？</div><div style="margin-left: 40px;">1）如果程序中缺少模块，WDL 是不会报错中断的，只会一直挂着任务但是又不推进。</div><div style="margin-left: 40px;">2）如果task中缺少某个程序（/usr/local/bin/perl），WDL 是不会报错中断的，只会一直挂着任务但是又不推进。</div><div><br/></div><div><br/></div><div><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">#####附件</span></div><div><span style="font-size: 12pt;"><a href="flow work 之WDL（ workflow description language_files/mutect2.wdl"><img src="flow work 之WDL（ workflow description language_files/0cb604ea345124f2436d437514214824.png" alt="mutect2.wdl"></a></span></div><div><a href="flow work 之WDL（ workflow description language_files/Cromwell_SGE_Docker_WDL.pdf"><img src="flow work 之WDL（ workflow description language_files/8f0e2d23c17756cedb58c792b1e076c9.png" alt="Cromwell_SGE_Docker_WDL.pdf"></a></div><div><br/></div></span>
</div></body></html> 